<!DOCTYPE html>
<html>
<head>
    <title>Amodal Completion</title>
    <script src="https://unpkg.com/jspsych@7.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-browser-check@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-instructions@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.0.0"></script>

    <link rel="stylesheet" href="https://unpkg.com/jspsych@7.0.0/css/jspsych.css">
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.1.1/css/survey.css">

</head>
<body>
    <style>
    </style>
</body>
<script>

  // initialize jsPsych
  // NB: remove data display from final version! */
  var jsPsych = initJsPsych({
    use_webaudio: false,
    on_finish: function () {
       //jsPsych.data.displayData();
    }
  });


var timeline = [];

 var stimulus_path = "Stimuli/";

  // Collect system information
  var setup_info = {
    type: jsPsychBrowserCheck
  };
    timeline.push(setup_info);

  
    
// Test phase instructions
   var testInstructions = {
       type: jsPsychInstructions,
       pages: [`In this task we want to investigate how you perceive certain images. Consider the image below:<br><img src=${stimulus_path + "TRIANGLE.png"} width="300"></img>`, 
      `When looking at this image, some people experience a white triangle without any outline sitting on top of a triangle with a black outline, as if watched from above. Transformed into a 3D figure, this interpretation of the image can be visualised like this:<br><img src=${stimulus_path + "Triangle3D.png"} width="300"></img> `,
      `As a result, when we look at the original image, we complete the black countours and experience the presence of a triangle with a black outline:<br><img src=${stimulus_path + "Triangle_Completed.png"} width="300"></img>`,
      `In this task we are interested in investigating how you perceive similar images where a part of one object is occluded by another object`],
         allow_backward: true,
         show_clickable_nav: true,
         button_label_next: ['Continue']
    };
  timeline.push(testInstructions);

    
        const initial_display = {
            type: jsPsychImageButtonResponse,
            stimulus:  [`Observe this image and think about what you would see if you remove the orange rectangle.<br><img src=${stimulus_path + "cat_amodal.png"} width="300"></img>`],
            choices: ['Continue']       
};
    
    const predominant_perception = {
            type: jsPsychSurveyLikert,
            questions: [
              {prompt: [`Observe this image. What would you see if you remove the red sqaure?<br><img src=${stimulus_path + "cat_amodal.png"} width="300"></img>`],
              name: 'amodal_1',
              labels: [`<img src=${stimulus_path + "cat_experience1.png"} width="200"></img>`, `<img src=${stimulus_path + "cat_experience2.png"} width="200"></img>`, `<img src=${stimulus_path + "cat_experience3.png"} width="200"></img>`, `something else`]
        }],
        scale_width: 900
         
};


const switching_perception = {
            type: jsPsychSurveyMultiChoice,
            questions: [
              {prompt: [`Can you switch between the different interpretations of the image?<br><img src=${stimulus_path + "cat_all.png"} width="700"></img>`],
              name: 'switching_perception',
              options: ['I can see the image in just one way', 'I can switch between 1 and 2', 'I can switch between 1 and 3', 'I can switch between 2 and 3', 'I can switch between all three interpretations']
        }]         
};

            
 timeline.push(initial_display, predominant_perception, switching_perception);
  // Run the experiment
  jsPsych.run(timeline);

</script>
</html>
